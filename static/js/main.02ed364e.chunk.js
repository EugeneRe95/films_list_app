(this.webpackJsonpfilms_list_app=this.webpackJsonpfilms_list_app||[]).push([[0],{110:function(e,t,r){},136:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(9),o=r.n(n),i=(r(110),r(89)),s=r(13),c=r(20),l="MOVIES/ADD_MOVIE",u="MOVIES/LOAD_MOVIES",d="MOVIES/DELETE_MOVIE",j="MOVIES/SEARCH_BY_MOVIE",b="MOVIES/SEARCH_BY_ACTORS",v="MOVIES/SORT_MOVIES",m="SPINNER/TOGGLE_SPINNER",O="SHOW_ERROR",f=r(77),h=r.n(f);var p=r(57),x=r(11),y=r(92),g=r(175),C=r(3);var E=function(e){var t=e.className,r=e.value,a=e.onChange,n=e.label,o=e.InputProps,i=e.name,s=e.error,c=e.helperText,l=Object(y.a)(e,["className","value","onChange","label","InputProps","name","error","helperText"]);return Object(C.jsx)(g.a,Object(x.a)(Object(x.a)({variant:"outlined"},l),{},{label:n,name:i,className:t,value:r,onChange:a,error:s,helperText:s&&c,InputProps:o}))},M=r(185),S=r(60),N=r.n(S),w=r(181),B=r(85),A=r.n(B),T=r(86),_=r.n(T),I=r(54),V=r(82),H=r(83),R=r(49),k=r(93),D=r(91),L=r(180),F=r(142),P=r(141),Y=r(140),q=r(145),z=r(184),$=r(179),G=r(183),J=Object($.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120}}}));var W=function(e){var t=e.value,r=e.onChange,a=e.name,n=e.label,o=e.data,i=e.error,s=e.helperText,c=J(),l=Object(G.a)();return Object(C.jsxs)(Y.a,{variant:"outlined",className:c.formControl,error:i,children:[Object(C.jsx)(q.a,{id:l,children:n}),Object(C.jsxs)(F.a,{value:t,labelId:l,label:n,name:a,onChange:r,children:[Object(C.jsx)(z.a,{value:"",children:Object(C.jsx)("em",{children:"None"})}),o&&o.map((function(e){return Object(C.jsx)(z.a,{value:e.value,children:e.title},Object(G.a)())}))]}),i&&Object(C.jsx)(P.a,{children:s})]})},Z=new RegExp("^[0-9]+$|^$"),K=new RegExp("^[a-zA-Z\u0430-\u044f\u0410-\u042f\u0454\u0404\u0456\u0406\u0457\u0407 ,-]*$"),Q=r(84),U=r.n(Q);var X=function(e){Object(k.a)(r,e);var t=Object(D.a)(r);function r(e){var a;return Object(V.a)(this,r),(a=t.call(this,e)).state={movie:"",year:"",actors:"",format:"",movieError:!1,yearError:!1,actorsError:!1,formatError:!1,movieHelpertext:"",yearHelperText:"",actorsHelperText:"",notification:!1},a.handleChange=a.handleChange.bind(Object(R.a)(a)),a.addNewMovie=a.addNewMovie.bind(Object(R.a)(a)),a}return Object(H.a)(r,[{key:"handleChange",value:function(e){"year"===e.target.name?this.setState((function(){if(e.target.value.match(Z))return{year:e.target.value}})):"actors"===e.target.name?this.setState((function(){if(e.target.value.match(K))return{actors:e.target.value}})):this.setState((function(){return Object(I.a)({},e.target.name,e.target.value)}))}},{key:"addNewMovie",value:function(){var e=this,t=function(e){for(var t=e.split(",").map((function(e){return e.trim()})),r=!1,a=function(e){void 0!==t.slice(e+1,t.length).find((function(r){return r===t[e]}))&&(r=!0)},n=0;n<t.length-1;n++)a(n);return r}(this.state.actors),r=0===this.props.movies.filter((function(t){return t.title===e.state.movie})).length,a=this.state.year>1850&&this.state.year<=(new Date).getFullYear();this.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{movieError:!r||""===e.movie,yearError:!a||""===e.year,actorsError:!(!t&&""!==e.actors),formatError:""===e.format,actorsHelperText:""===e.actors?"This field is required":"Not allowed to put down actor name more than one time",yearHelperText:""===e.year?"This field is required":"Value range must be 1850 - ".concat((new Date).getFullYear()),movieHelpertext:""===e.movie?"This field is required":"Movie with such name already exists"})}),(function(){e.state.movieError||e.state.yearError||e.state.actorsError||e.state.formatError||(e.props.addMovie({title:e.state.movie,release_date:e.state.year,stars:e.state.actors,format:e.state.format}),e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{notification:!0})}),(function(){setTimeout((function(){e.props.setMovieBar(!1),e.setState((function(){return{movie:"",year:"",actors:"",format:"",notification:!1}}))}),1e3)})))}))}},{key:"render",value:function(){var e=this.props,t=e.movieBar,r=e.setMovieBar,a=this.state,n=a.movie,o=a.year,i=a.actors,s=a.format,c=a.movieError,l=a.movieHelpertext,u=a.yearHelperText,d=a.actorsHelperText,j=a.yearError,b=a.actorsError,v=a.formatError,m=a.notification;return Object(C.jsxs)("div",{id:"add-movie-bar",className:t?"active":"",children:[Object(C.jsx)(E,{className:"text-field",label:"Movie name",name:"movie",error:c,helperText:l,value:n,onChange:this.handleChange,variant:"outlined"}),Object(C.jsx)(E,{className:"text-field",label:"Year",name:"year",error:j,value:o,helperText:u,onChange:this.handleChange}),Object(C.jsx)(E,{className:"text-field",label:"Actors",name:"actors",error:b,value:i,helperText:d,onChange:this.handleChange,variant:"outlined"}),Object(C.jsx)(W,{value:s,label:"Format",error:v,name:"format",helperText:"This field is required",data:[{title:"VHS",value:"VHS"},{title:"DVD",value:"DVD"},{title:"Blu-Ray",value:"Blu-Ray"}],onChange:this.handleChange}),Object(C.jsxs)("div",{className:"btn-conrtols",children:[Object(C.jsx)(L.a,{variant:"contained",color:"secondary",onClick:function(){r(!1)},children:"Cancel"}),Object(C.jsx)(L.a,{variant:"contained",color:"primary",onClick:this.addNewMovie,children:"Confirm"})]}),Object(C.jsxs)("div",{className:"notifications "+(m?"active":""),children:[Object(C.jsx)("h4",{children:"Successfuly added"}),Object(C.jsx)(U.a,{size:"large",color:"primary"})]})]})}}]),r}(a.Component),ee={addMovie:function(e){return{type:l,payload:e}}},te=Object(c.b)((function(e){return{movies:e.movies}}),ee)(X);var re={filterByMovie:function(e){return{type:j,payload:e}},filterByActors:function(e){return{type:b,payload:e}},sortMovies:function(){return{type:v}}},ae=Object(c.b)((function(e){return{actorsFilter:e.filterByActors,moviesFilter:e.filterByMovies}}),re)((function(e){var t=e.filterByActors,r=e.filterByMovie,n=e.actorsFilter,o=e.moviesFilter,i=e.sortMovies,s=Object(a.useState)(!1),c=Object(p.a)(s,2),l=c[0],u=c[1];return Object(C.jsxs)("header",{children:[Object(C.jsx)(E,{className:"text-field",label:"Actor",value:n,InputProps:{endAdornment:Object(C.jsx)(M.a,{position:"end",children:Object(C.jsx)(N.a,{color:"disabled"})})},onChange:function(e){t(e.target.value)}}),Object(C.jsx)(E,{className:"text-field",label:"Movie",value:o,InputProps:{endAdornment:Object(C.jsx)(M.a,{position:"end",children:Object(C.jsx)(N.a,{color:"disabled"})})},onChange:function(e){r(e.target.value)}}),Object(C.jsx)(w.a,{"aria-label":"Sort",title:"Sort by Alphabet",onClick:function(){i()},children:Object(C.jsx)(A.a,{color:"primary"})}),Object(C.jsx)(w.a,{"aria-label":"Add-movie",title:"Add Movie",onClick:function(){u(!0)},children:Object(C.jsx)(_.a,{color:"primary",fontSize:"large"})}),Object(C.jsx)(te,{movieBar:l,setMovieBar:u})]})})),ne=r(87),oe=r.n(ne),ie=r(88),se=r.n(ie),ce=Object($.a)((function(){return{margin:{margin:"0px"}}}));var le={deleteMovie:function(e){return{type:d,payload:e}}},ue=Object(c.b)(null,le)((function(e){var t=e.title,r=e.format,n=e.release_date,o=e.stars,i=e.deleteMovie,s=ce(),c=Object(a.useState)(!1),l=Object(p.a)(c,2),u=l[0],d=l[1];return Object(C.jsxs)("div",{className:"movie-item",children:[Object(C.jsxs)("div",{className:"heading",children:[Object(C.jsx)("h3",{children:t}),Object(C.jsxs)("div",{className:"btn",children:[Object(C.jsx)(w.a,{"aria-label":"dropdown",className:s.margin,title:"Movie details",onClick:function(){d(!u)},children:Object(C.jsx)(oe.a,{color:"primary",className:"dropdown-btn "+(u?"active":"")})}),Object(C.jsx)(w.a,{"aria-label":"delete",title:"Delete movie",className:s.margin,onClick:function(){i(t)},children:Object(C.jsx)(se.a,{color:"secondary"})})]})]}),Object(C.jsxs)("div",{className:"movie-item_info "+(u?"active":""),children:[Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Format:"}),r]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Release date:"}),n]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Stars:"}),o]})]})]})}));var de=Object(c.b)((function(e){return{movies:e.movies.filter((function(t){return-1!==t.title.toLowerCase().indexOf(e.filterByMovie.toLowerCase())})).filter((function(t){return-1!==t.stars.toLowerCase().indexOf(e.filterByActors.toLowerCase())})),error:e.error}}),null)((function(e){var t=e.movies,r=e.error;return Object(C.jsx)("section",{id:"movies-list",children:r?Object(C.jsx)("h2",{children:"Oops, something went wrong!"}):t.map((function(e){return Object(C.jsx)(ue,{title:e.title,format:e.format,release_date:e.release_date,stars:e.stars},Object(G.a)())}))})})),je=r(182);var be={loadMovies:function(){return function(e){h.a.get("https://eugenere95.github.io/films_list_app/movies.json").then((function(t){e({type:m,payload:!1}),e({type:u,payload:t.data})})).catch((function(t){e({type:m,payload:!1}),e({type:O,payload:!0}),console.log(t)}))}}},ve=Object(c.b)((function(e){return{spinner:e.spinner}}),be)((function(e){var t=e.loadMovies,r=e.spinner;return Object(a.useEffect)((function(){t()}),[]),Object(C.jsxs)("section",{id:"main-page",children:[Object(C.jsx)(ae,{})," ",r?Object(C.jsx)(je.a,{id:"linear-progress"}):Object(C.jsx)(de,{})]})}));var me=function(){return Object(C.jsx)(i.a,{basename:"/films_list_app",children:Object(C.jsx)(s.a,{exact:!0,path:"/",component:ve})})},Oe={movies:[],filterByActors:"",filterByMovie:"",sortByAlphabet:!0,spinner:!0,error:!1,movieAddedMes:!1};var fe=r(46),he=r(90),pe=Object(fe.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(x.a)(Object(x.a)({},e),{},{movies:[t.payload].concat(e.movies)});case d:var r=window.confirm('Are you sure of deleting "'.concat(t.payload,'" movie?'));return r?Object(x.a)(Object(x.a)({},e),{},{movies:e.movies.filter((function(e){return e.title!==t.payload}))}):Object(x.a)({},e);case b:return Object(x.a)(Object(x.a)({},e),{},{filterByActors:t.payload});case j:return Object(x.a)(Object(x.a)({},e),{},{filterByMovie:t.payload});case v:return Object(x.a)(Object(x.a)({},e),{},{movies:e.sortByAlphabet?e.movies.sort((function(e,t){return e.title.toLowerCase().localeCompare(t.title.toLowerCase())})):e.movies.sort((function(e,t){return t.title.toLowerCase().localeCompare(e.title.toLowerCase())})),sortByAlphabet:!e.sortByAlphabet});case u:return Object(x.a)(Object(x.a)({},e),{},{movies:t.payload});case m:return Object(x.a)(Object(x.a)({},e),{},{spinner:t.payload});case O:return Object(x.a)(Object(x.a)({},e),{},{error:t.payload});default:return e}}),Object(fe.a)(he.a));o.a.render(Object(C.jsx)(c.a,{store:pe,children:Object(C.jsx)(me,{})}),document.getElementById("root"))}},[[136,1,2]]]);
//# sourceMappingURL=main.02ed364e.chunk.js.map